# 审计取数用SQL

## 0.在职用户描述
```SQL
SELECT 
	SUBSTR(ULAN8,2,7) 工号,
  trim(ABALPH) 姓名,
  trim(RLTOROLE) 账号,
  trim(RLFRROLE) 角色,
  trim(AUROLEDESC) 角色描述
FROM 
	sy910.F95921
	LEFT JOIN SY910.F00926 ON RLFRROLE=AUUSER
	LEFT JOIN SY910.F0092 ON RLTOROLE=ULUSER
	LEFT JOIN PRODDTA.F0101 ON ULAN8=ABAN8
	LEFT JOIN SY910.F98OWSEC ON RLTOROLE=SCUSER
WHERE 
	RLFRROLE NOT LIKE 'DR%' 
  AND RLFRROLE NOT IN ('EL-PD','XB-PY','PH_ROLES','ROLECHSR') 
  AND SCEUSER='01'
ORDER BY 4,3;
```
## 1.F9312
```SQL
SELECT * FROM SY910.F9312 WHERE SHUPMJ>121000 ORDER BY SHUPMJ,SHUPMT,SHUSER;
```
## 2.F95921
```SQL
SELECT * FROM SY910.F95921 WHERE RLFRROLE NOT LIKE 'DR%';
```
## 3.F0092
```SQL
SELECT * FROM SY910.F0092 WHERE ULUGRP <> '*GROUP';
```
## 4.F0092账号对应名称表
```SQL
SELECT ULUSER,ULAN8,ABALPH 
FROM SY910.F0092 
LEFT JOIN PRODDTA.F0101 ON ULAN8=ABAN8 
WHERE ULUGRP <> '*GROUP';
```
## 5.F980WSEC
```SQL
SELECT * FROM sy910.F98OWSEC;
```
## 6.F00950
```SQL
SELECT * FROM SY910.F00950;
```
## 7.F98210
```SQL
SELECT * FROM SY910.F98210 WHERE LHUPMJ>121000;
```
## 8.F98223
```SQL
SELECT * FROM SY910.F98223;
```
## 9.F98224
```SQL
SELECT * FROM SY910.F98224;
```
## 10.F98225
```SQL
SELECT * FROM SY910.F98225;
```
## 11.F98226
```SQL
SELECT * FROM SY910.F98226;
```
## 12.F98220
```SQL
SELECT * FROM SY910.F98220;
```
## 13.F91300
```SQL
SELECT * FROM SY910.F91300 WHERE SJSCHENHV='PD910' AND SJSCHJBSTAT='01';
```
## 14.F91320
```SQL
SELECT * FROM SY910.F91320 WHERE JSLNCENVH='PD910' AND JSUPMJ>121000;
```
## Finding sysadmin
```SQL
SELECT 
	SUBSTR(ULAN8,2,7) 工号,
  trim(ABALPH) 姓名,
  trim(RLTOROLE) 账号,
  trim(RLFRROLE) 角色,
  trim(AUROLEDESC) 角色描述
FROM 
	sy910.F95921
	LEFT JOIN SY910.F00926 ON RLFRROLE=AUUSER
	LEFT JOIN SY910.F0092 ON RLTOROLE=ULUSER
	LEFT JOIN PRODDTA.F0101 ON ULAN8=ABAN8
	LEFT JOIN SY910.F98OWSEC ON RLTOROLE=SCUSER
WHERE 
	RLFRROLE NOT LIKE 'DR%' 
  AND RLFRROLE IN ('SYSADMIN') 
  AND SCEUSER='01'
```